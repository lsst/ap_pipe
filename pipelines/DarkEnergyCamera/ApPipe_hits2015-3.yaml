description: End to end AP pipeline for the repo in /project/mrawls/hits2015-3

instrument: lsst.obs.decam.DarkEnergyCamera
imports:
  - location: $AP_PIPE_DIR/pipelines/DarkEnergyCamera/ApPipe.yaml
tasks:
    characterizeImage:
        class: lsst.pipe.tasks.characterizeImage.CharacterizeImageTask
        config:
          refObjLoader.ref_dataset_name: 'panstarrs'
    calibrate:
        class: lsst.pipe.tasks.calibrate.CalibrateTask
        config:
          astromRefObjLoader.ref_dataset_name: 'gaia'
          photoRefObjLoader.ref_dataset_name: 'panstarrs'
          photoCal.photoCatName: 'panstarrs'
          connections.astromRefCat: 'gaia'
          connections.photoRefCat: 'panstarrs'
          python: |
            config.astromRefObjLoader.filterMap = {}
            config.astromRefObjLoader.filterMap['g'] = 'phot_g_mean'
            config.astromRefObjLoader.filterMap['r'] = 'phot_g_mean'
            config.astromRefObjLoader.filterMap['i'] = 'phot_g_mean'
            config.astromRefObjLoader.filterMap['z'] = 'phot_g_mean'
            config.astromRefObjLoader.filterMap['y'] = 'phot_g_mean'
